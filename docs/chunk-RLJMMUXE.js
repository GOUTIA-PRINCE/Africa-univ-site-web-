import{Gb as l,L as p,R as h,a as s,b as n,o as i}from"./chunk-JEBBGWU2.js";var c=class a{http=h(l);apiUrl="http://localhost:3000/api/products";baseUrl="http://localhost:3000/";getProducts(){return this.http.get(this.apiUrl).pipe(i(t=>t.map(e=>this.formatProductImage(e))))}getProductById(t){return this.http.get(`${this.apiUrl}/${t}`).pipe(i(e=>e?this.formatProductImage(e):void 0))}formatProductImage(t){return t.image&&t.image.startsWith("assets/")?n(s({},t),{image:this.baseUrl+t.image}):t}addProduct(t,e){let r=new FormData;r.append("product",JSON.stringify(t)),r.append("image",e);let o=localStorage.getItem("token");return this.http.post(this.apiUrl,r,{headers:{Authorization:`Bearer ${o}`}})}updateProduct(t,e){let r=new FormData;r.append("product",JSON.stringify(t)),e&&r.append("image",e);let o=localStorage.getItem("token");return this.http.put(`${this.apiUrl}/${t.id}`,r,{headers:{Authorization:`Bearer ${o}`}})}deleteProduct(t){let e=localStorage.getItem("token");return this.http.delete(`${this.apiUrl}/${t}`,{headers:{Authorization:`Bearer ${e}`}})}getCategories(){return this.http.get("http://localhost:3000/api/categories")}addCategory(t){let e=localStorage.getItem("token");return this.http.post("http://localhost:3000/api/categories",{name:t},{headers:{Authorization:`Bearer ${e}`}})}deleteCategory(t){let e=localStorage.getItem("token");return this.http.delete(`http://localhost:3000/api/categories/${t}`,{headers:{Authorization:`Bearer ${e}`}})}getSettings(){return this.http.get("http://localhost:3000/api/settings")}updateSettings(t){let e=localStorage.getItem("token");return this.http.put("http://localhost:3000/api/settings",t,{headers:{Authorization:`Bearer ${e}`}})}static \u0275fac=function(e){return new(e||a)};static \u0275prov=p({token:a,factory:a.\u0275fac,providedIn:"root"})};export{c as a};
