import{d as R,e as I}from"./chunk-G5F2FBMI.js";import{a as k,b as d,c as T,d as z,g as j,j as q,k as A,p as D,r as G,s as V}from"./chunk-LD2MMBCB.js";import{Bb as N,Da as p,Ja as m,Ka as g,La as r,Ma as t,Na as s,R as P,Ra as M,Sa as w,Xa as o,Za as x,pa as y,ra as i,yb as S,za as E}from"./chunk-JEBBGWU2.js";function U(n,a){if(n&1&&(r(0,"div",28),o(1),t()),n&2){let l=w();i(),x(" ",l.errorMessage," ")}}function B(n,a){if(n&1&&s(0,"img",29),n&2){let l=w();m("src",l.imagePreview,y)}}function H(n,a){n&1&&s(0,"i",30)}function J(n,a){n&1&&(r(0,"span",31),o(1,"Requis"),t())}function K(n,a){n&1&&(r(0,"span",31),o(1,"Requis"),t())}function Q(n,a){n&1&&(r(0,"span",31),o(1,"Email invalide"),t())}function W(n,a){n&1&&(r(0,"span",31),o(1,"Min. 6 caract\xE8res"),t())}function X(n,a){n&1&&(r(0,"span",31),o(1,"Les mots de passe ne correspondent pas"),t())}var L=class n{fb=P(D);router=P(R);authService=P(V);registerForm;selectedFile=null;imagePreview=null;errorMessage="";loading=!1;constructor(){this.registerForm=this.fb.group({firstName:["",d.required],lastName:["",d.required],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]],confirmPassword:["",d.required]},{validators:this.passwordMatchValidator})}passwordMatchValidator(a){return a.get("password")?.value===a.get("confirmPassword")?.value?null:{mismatch:!0}}onFileSelected(a){let l=a.target.files[0];if(l){this.selectedFile=l;let e=new FileReader;e.onload=()=>this.imagePreview=e.result,e.readAsDataURL(l)}}onSubmit(){this.registerForm.valid?(this.loading=!0,this.errorMessage="",this.authService.register(this.registerForm.value,this.selectedFile||void 0).subscribe({next:()=>{this.loading=!1,alert("Inscription r\xE9ussie ! Vous pouvez maintenant vous connecter."),this.router.navigate(["/login"])},error:a=>{this.loading=!1,this.errorMessage=a.error?.message||"Une erreur est survenue lors de l'inscription."}})):this.registerForm.markAllAsTouched()}static \u0275fac=function(l){return new(l||n)};static \u0275cmp=E({type:n,selectors:[["app-register"]],decls:49,vars:23,consts:[[1,"auth-container"],[1,"auth-box"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"profile-upload"],[1,"profile-preview"],["alt","Aper\xE7u",3,"src",4,"ngIf"],["class","fas fa-user",4,"ngIf"],["for","profilePicture",1,"upload-label"],[1,"fas","fa-camera"],["type","file","id","profilePicture","accept","image/*","hidden","",3,"change"],[1,"form-row"],[1,"form-group","half"],["for","firstName"],["type","text","id","firstName","formControlName","firstName"],["class","error-msg",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email"],["for","password"],["type","password","id","password","formControlName","password"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled"],[1,"auth-footer"],["routerLink","/login"],[1,"alert","alert-danger"],["alt","Aper\xE7u",3,"src"],[1,"fas","fa-user"],[1,"error-msg"]],template:function(l,e){if(l&1&&(r(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Cr\xE9er un compte"),t(),r(4,"p"),o(5,"Rejoignez-nous d\xE8s aujourd'hui et commencez votre shopping."),t(),p(6,U,2,1,"div",2),r(7,"form",3),M("ngSubmit",function(){return e.onSubmit()}),r(8,"div",4)(9,"div",5),p(10,B,1,1,"img",6)(11,H,1,0,"i",7),t(),r(12,"label",8),s(13,"i",9),o(14," Photo de profil "),r(15,"input",10),M("change",function(c){return e.onFileSelected(c)}),t()()(),r(16,"div",11)(17,"div",12)(18,"label",13),o(19,"Pr\xE9nom"),t(),s(20,"input",14),p(21,J,2,0,"span",15),t(),r(22,"div",12)(23,"label",16),o(24,"Nom"),t(),s(25,"input",17),p(26,K,2,0,"span",15),t()(),r(27,"div",18)(28,"label",19),o(29,"Email"),t(),s(30,"input",20),p(31,Q,2,0,"span",15),t(),r(32,"div",18)(33,"label",21),o(34,"Mot de passe"),t(),s(35,"input",22),p(36,W,2,0,"span",15),t(),r(37,"div",18)(38,"label",23),o(39,"Confirmer le mot de passe"),t(),s(40,"input",24),p(41,X,2,0,"span",15),t(),r(42,"button",25),o(43),t()(),r(44,"div",26)(45,"p"),o(46,"D\xE9j\xE0 un compte ? "),r(47,"a",27),o(48,"Se connecter"),t()()()()()),l&2){let u,c,f,_,v,h,C,b,F,O;i(6),m("ngIf",e.errorMessage),i(),m("formGroup",e.registerForm),i(2),g("no-image",!e.imagePreview),i(),m("ngIf",e.imagePreview),i(),m("ngIf",!e.imagePreview),i(9),g("error",((u=e.registerForm.get("firstName"))==null?null:u.invalid)&&((u=e.registerForm.get("firstName"))==null?null:u.touched)),i(),m("ngIf",((c=e.registerForm.get("firstName"))==null?null:c.invalid)&&((c=e.registerForm.get("firstName"))==null?null:c.touched)),i(4),g("error",((f=e.registerForm.get("lastName"))==null?null:f.invalid)&&((f=e.registerForm.get("lastName"))==null?null:f.touched)),i(),m("ngIf",((_=e.registerForm.get("lastName"))==null?null:_.invalid)&&((_=e.registerForm.get("lastName"))==null?null:_.touched)),i(4),g("error",((v=e.registerForm.get("email"))==null?null:v.invalid)&&((v=e.registerForm.get("email"))==null?null:v.touched)),i(),m("ngIf",((h=e.registerForm.get("email"))==null?null:h.invalid)&&((h=e.registerForm.get("email"))==null?null:h.touched)),i(4),g("error",((C=e.registerForm.get("password"))==null?null:C.invalid)&&((C=e.registerForm.get("password"))==null?null:C.touched)),i(),m("ngIf",((b=e.registerForm.get("password"))==null?null:b.invalid)&&((b=e.registerForm.get("password"))==null?null:b.touched)),i(4),g("error",e.registerForm.hasError("mismatch")&&((F=e.registerForm.get("confirmPassword"))==null?null:F.touched)),i(),m("ngIf",e.registerForm.hasError("mismatch")&&((O=e.registerForm.get("confirmPassword"))==null?null:O.touched)),i(),m("disabled",e.loading||e.registerForm.invalid),i(),x(" ",e.loading?"Chargement...":"S'inscrire"," ")}},dependencies:[N,S,G,j,k,T,z,q,A,I],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:80vh;padding:2rem;background-color:#f8fafc}.auth-box[_ngcontent-%COMP%]{background:#fff;padding:2.5rem;border-radius:16px;box-shadow:0 10px 25px -5px #0000001a;width:100%;max-width:500px}.auth-box[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:.5rem;color:var(--text-color);font-size:1.75rem}.auth-box[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{text-align:center;color:#64748b;margin-bottom:2rem}.profile-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-bottom:2rem}.profile-upload[_ngcontent-%COMP%]   .profile-preview[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:50%;background-color:#f1f5f9;display:flex;align-items:center;justify-content:center;overflow:hidden;margin-bottom:1rem;border:2px solid #e2e8f0}.profile-upload[_ngcontent-%COMP%]   .profile-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.profile-upload[_ngcontent-%COMP%]   .profile-preview[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:3rem;color:#94a3b8}.profile-upload[_ngcontent-%COMP%]   .profile-preview.no-image[_ngcontent-%COMP%]{background-color:#f1f5f9}.profile-upload[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]{background:#f1f5f9;padding:.5rem 1rem;border-radius:20px;font-size:.875rem;color:#475569;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:.5rem}.profile-upload[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]:hover{background:#e2e8f0;color:var(--primary-color)}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-color)}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #e2e8f0;border-radius:8px;transition:all .2s;font-size:1rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px rgba(var(--primary-rgb),.1)}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#ef4444}.form-row[_ngcontent-%COMP%]{display:flex;gap:1rem}.form-row[_ngcontent-%COMP%]   .half[_ngcontent-%COMP%]{flex:1}.error-msg[_ngcontent-%COMP%]{color:#ef4444;font-size:.875rem;margin-top:.25rem;display:block}.btn-block[_ngcontent-%COMP%]{width:100%;margin-top:1rem;padding:.875rem;font-size:1.1rem}.auth-footer[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;border-top:1px solid #e2e8f0;padding-top:1.5rem}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#64748b}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);font-weight:600;text-decoration:none}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{L as RegisterComponent};
